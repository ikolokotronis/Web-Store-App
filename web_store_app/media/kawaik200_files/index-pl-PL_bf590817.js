!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://assets.allegrostatic.com/sc-10556/",n(n.s=0)}({0:function(e,t,n){e.exports=n("O14P")},GI1G:function(e){e.exports=JSON.parse('{"a":"https://assets.allegrostatic.com/metrum/icon/arrowhead-9148b8f39c.svg","b":"https://assets.allegrostatic.com/metrum/icon/three-dots-cc8d7d016a.svg"}')},O14P:function(e,t,n){"use strict";n.r(t);var r={};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(r),n.d(r,"inbox",(function(){return c})),n.d(r,"inboxLoginButton",(function(){return u})),n.d(r,"messages",(function(){return l})),n.d(r,"message",(function(){return m})),n.d(r,"messageLink",(function(){return d})),n.d(r,"text",(function(){return _})),n.d(r,"messageText",(function(){return g})),n.d(r,"emptyText",(function(){return f})),n.d(r,"guestText",(function(){return p})),n.d(r,"errorText",(function(){return h})),n.d(r,"guestContentWrapper",(function(){return v})),n.d(r,"registerButton",(function(){return y})),n.d(r,"spinner",(function(){return b})),n.d(r,"messageDisplayed",(function(){return w})),n.d(r,"messageNew",(function(){return x})),n.d(r,"messageClicked",(function(){return j})),n.d(r,"messageIcon",(function(){return k})),n.d(r,"messageTime",(function(){return M})),n.d(r,"right9px",(function(){return q})),n.d(r,"messageMenuDropdown",(function(){return z})),n.d(r,"messageMenuDropdownToggle",(function(){return E})),n.d(r,"messageMenuDropdownToggleActive",(function(){return L})),n.d(r,"messageMenuDropdownContentContainer",(function(){return S})),n.d(r,"messageMenuDropdownContent",(function(){return C})),n.d(r,"messageMenuDropdownOpen",(function(){return D})),n.d(r,"messageMenuActions",(function(){return A})),n.d(r,"messageMenuAction",(function(){return O})),n.d(r,"messageMenuActionLink",(function(){return T})),n.d(r,"messageGroup",(function(){return I})),n.d(r,"messageGroupHeader",(function(){return N})),n.d(r,"messageGroupToggle",(function(){return G})),n.d(r,"arrowIcon",(function(){return P})),n.d(r,"messageGroupToggleOpen",(function(){return U})),n.d(r,"messageGroupContentInvisible",(function(){return $})),n.d(r,"messageGroupContent",(function(){return R})),n.d(r,"messageGroupContentVisible",(function(){return K}));var c="mpof_ki myre_zn mr3m_1 m389_6m m7f5_6m _51ce4_3ysel",u="mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 m3h2_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r mh36_16 mvrt_16 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_9u msts_enp mrmn_qo mrhf_u8 m31c_kb m0ux_fp b1bc7 mp4t_16 mryx_32 mpof_vs mupj_5k _51ce4_ERK1D",l="mx4z_5x mr3m_1 m7er_k4 mp4t_0 m3h2_0 mryx_0 munh_0 mg9e_0 mvrt_0 mj7a_0 mh36_0 mdwt_56 _51ce4_3KcyV",m="mp7g_oh mpof_z0 mp4t_0 m3h2_0 mryx_0 munh_0 mg9e_0 mvrt_0 mj7a_0 mh36_0 msts_9u _51ce4_27WWV",d="mpof_ki mli2_1 mj9z_5r m7f5_5x m389_5x _51ce4_3NjUU",_="_1h7wt _9hx3e _51ce4_10wpA",g="_1h7wt _9hx3e _51ce4_yC03d",f="mzmg_6m mgmw_ag mg9e_24 mj7a_24",p="mgmw_ag",h="m7er_56 msts_szl mx4z_5x mg9e_16 mvrt_16 mj7a_16 mh36_16 mp4t_16",v="mzmg_6m mg9e_24 mj7a_24",y="mgn2_14 mp0t_0a m9qz_yo mp7g_oh mse2_40 mqu1_40 mtsp_ib mli8_k4 mp4t_0 m3h2_0 mryx_0 munh_0 m911_5r mefy_5r mnyp_5r mdwl_5r msbw_2 mldj_2 mtag_2 mm2b_2 mqvr_2 msa3_z4 mqen_m6 meqh_en m0qj_5r msts_n7 mh36_16 mvrt_16 mg9e_0 mj7a_0 m9tr_pf m2ha_2 m8qd_qh mjt1_n2 bqyr8 mgmw_vz mrmn_qo mrhf_u8 m31c_kb m0ux_fp boww4 mpof_vs",b="_6gjm5 mp4t_24 m3h2_24 mryx_24 munh_24",w="_51ce4_2yU-d",x="_51ce4_3BP2u",j="_51ce4_1a6Wt",k="mjyo_6x mse2_40 meqh_en msa3_z4 m0s5_e6 isflp mg9e_0 mvrt_0 mj7a_0 mh36_0 mli2_0 _51ce4_20QA1",M="_6x7yn mpof_ki m389_6m _51ce4_ETIEc",q="_51ce4_E6ipK",z="mp7g_f6 mqen_m6 m9tr_5r _51ce4_E6ipK _51ce4_248ly",E="_w7z6o _ypulx m9vn_d2 m9vn_gl_m _51ce4_2e_I7",L="m9vn_d2",S="mp7g_oh",C="mp7g_f6 mpof_5r mjyo_6x mjb5_w6 mg9e_0 mvrt_0 mj7a_0 mh36_0 msts_9u mx7m_1 m911_co mefy_co mnyp_co mdwl_co mlkp_ag mnjl_0 _51ce4_wYIFj",D="_51ce4_3JGSa",A="_3a4zn _12vfa m7er_k4 mzmg_6m mh36_16 mvrt_16 _51ce4_2_Zk-",O="_1bmp9 mryx_0",T="_w7z6o _ypulx mtsp_ib",I="_51ce4_3CcuH",N="mp7g_oh _51ce4_2SLxp",G="mp7g_f6 mqen_m6 _51ce4_E6ipK _51ce4_2xCmc",P="mjyo_6x meqh_en msa3_z4 m0s5_e6 isflp mg9e_0 mvrt_0 mj7a_0 mh36_0 mse2_24 _51ce4_3d2yY",U="_51ce4_337Tu",$="mpof_5r",R="mpof_5r _51ce4_1qkU4 _51ce4_2csNU",K="mpof_z0";function V(e){if(Array.isArray(e))return e}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}function H(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(e,t){return V(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}}(e,t)||Z(e,t)||H()}function J(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Y={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;"},F=/<|>|&|"|'/g,Q=(RegExp(Array.from("javascript:",(function(e){return"".concat(e).concat("[\\n\\r\\t]*")})).join(""),"ig"),function(e){return Y[e]}),X=function(){function e(t,n){o(this,e),this.$=t[0];for(var r=0;r<n.length;r++){var a=n[r];if(Array.isArray(a))for(var s=0;s<a.length;s++)this.$esc(a[s]);else this.$esc(a);this.$+=t[r+1]}}return s(e,[{key:"$esc",value:function(t){this.$+=t instanceof e?t.$:(t+"").replace(F,Q)}},{key:"toString",value:function(){return this.$}}]),e}(),ee=function(e){return new X([e+""],[])},te=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new X(e,n)},ne=n("GI1G"),re={"pl-PL":{delete:[["",["Usuń wiadomość"]]],"delete-thread":[["",["Usuń cały wątek"]]],"more-than-month":[["",["ponad miesiąc"]]],ago:[["",["temu"]]],day:[["",["dzień","dni"]]],"hour-short":[["",["godz."]]],"minute-short":[["",["min."]]],sent:[["",["Wysłane"]]],category:[["",["Kategoria"]]],"expand-thread":[["",["Rozwiń wątek"]]],"expand-menu":[["",["Rozwiń menu"]]],"manage-message":[["",["Zarządzaj tą wiadomością"]]],"loading-messages-failed":[["",["Nie mogliśmy wyświetlić Twoich powiadomień."]]],login:[["",["Zaloguj się"]]],register:[["",["Zarejestruj się"]]],"log-in-to-show-messages":[["",["Zaloguj się, aby zobaczyć <br>swoje powiadomienia."]]],"dont-have-account":[["",["Nie masz jeszcze konta?"]]],"no-new-messages":[["",["Nie masz żadnych <br>nowych powiadomień."]]]}},oe=/({{[^}]+}}|{%[^%}]+%})/g,ae=/({{[^}]+}})/g,se=/({%[^%}]+%})/g,ie=/({{\s*|\s*}}|{%\s*|\s*%})/g;function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("string"==typeof e)throw Error("Translation has to be an array");return e.find((function(e){return e[0]===t}))[1]}var ue,le,me,de,_e,ge,fe,pe,he,ve,ye,be,we,xe,je,ke=function(e,t,n){var r=re["pl-PL"][e];if(!r)throw Error('Missing translation for lang "pl-PL" and key "'.concat(e,'"'));return t?function(e,t,n){var r=ce(e,t.context);return function(e,t,n){if(n){var r=0;return e.split(oe).map((function(n){if(n.match(se)){var o=t.formatters[r];if(o)return r+=1,o(n.replace(ie,""));throw Error('Missing translation formatter for "'.concat(e,'"'))}return n.match(ae)?t[n.replace(ie,"")]:n}))}var o=e.match(oe),a=0;return o?o.reduce((function(n,r){var o=r.replace(ie,"");if(r.match(se)){var s=t.formatters[a];if(s)return a+=1,n.replace(r,s(o));throw Error('Missing translation formatter for "'.concat(e,'"'))}return r.match(ae)?n.replace(r,t[o]):n}),e):e}(r=parseInt(t.count,10)>=0?function(e,t){var n,r=1==(n=t)?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2;return"boolean"!=typeof r?e[r]:e[r?1:0]}(r,t.count):B(r,1)[0],t,n)}(r,t,n):ce(r)[0]},Me=(ue=r,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return ue[e]||e})).join(" ")}),qe=(je=new Date,function(e){var t=function(e){if(e>=2592e3)return ke("more-than-month");if(e>=86400){var t=Math.floor(e/86400),n=t>1?2:1;return"".concat(t," ").concat(ke("day",{count:n}))}return e>=3600?"".concat(Math.floor(e/3600)," ").concat(ke("hour-short")):"".concat(Math.max(1,Math.floor(e/60))," ").concat(ke("minute-short"))}(Math.floor((je-e)/1e3));return"".concat(t," ").concat(ke("ago"))}),ze=te(le||(le=J(['<img class="','" src="','" alt="','" width="100%" height="100%" />'])),P,ne.a,ke("expand-thread")),Ee=te(me||(me=J(['<img class="','" src="','" alt="','" width="100%" height="100%" />'])),P,ne.b,ke("expand-menu"));function Le(e,t,n){var r=B(e?["action-delete-group",ke("delete-thread"),t]:["action-delete",ke("delete"),n],3),o=r[0],a=r[1],s=r[2];return te(ge||(ge=J(['<ul class="','"><li class="','"><button type="button" class="','" data-role="','" data-id-to-delete="','">',"</button></li></ul>"])),A,O,T,o,s,a)}function Se(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return te(fe||(fe=J(['<div class="','" data-role="message-actions-dropdown"><button type="button" data-role="message-dropdown" aria-label="','" class="','">','</button><div class="','"><div class="','">',"</div></div></div>"])),z,ke("manage-message"),E,Ee,S,C,Le(t,n,e))}function Ce(e,t,n,r){var o="".concat("/inbox/redirect/id/").concat(t);return te(pe||(pe=J(['<a data-role="message-link" href="','" class="','" data-analytics-clickable data-analytics-click-value="','">','<span><span class="','">',"</span>","</span></a>"])),o,d,n,function(e){return te(_e||(_e=J(['<img class="','" src="','" alt="','" width="100%" height="100%" />'])),k,e,ke("category"))}(r),g,n,ee(function(e){var t=new Date(e),n=t.toLocaleDateString(),r=qe(t);return te(de||(de=J(['<time class="','" datetime="','" aria-label="'," ",'">',"</time>"])),M,n,ke("sent"),r,r)}(e)))}function De(e){var t=e.text,n=e.image.svg,r=e.status,o=e.createdAt,a=e.tinkerbellId,s=e.groupId,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=Me("message","message".concat(r.charAt(0)+r.slice(1).toLowerCase()));return te(he||(he=J(['<li class="','" data-role="message">'," ","</li>"])),c,Se(a,i,s),Ce(o,a,t,n))}var Ae=function(e){return De(e,!1)};function Oe(e){if(1===e.length)return Ae(e[0]);var t,n=V(t=e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||Z(t)||H(),r=n[0],o=n.slice(1),a=De(r,!0),s=o.map(Ae).join(""),i=te(ve||(ve=J(['<div class="','" data-role="message-group-toggle">',"</div>"])),G,ze);return te(ye||(ye=J(['<li class="','"><ol class="','">'," ",'</ol><ol data-role="message-group-content" class="','">',"</ol></li>"])),I,N,ee(a),ee(i),R,ee(s))}function Te(e){return"".concat("group_").concat(e)}function Ie(e){var t=e.className,n=e.content;return te(we||(we=J(['<p class="'," ",'">',"</p>"])),t,_,ee(n))}function Ne(){var e=ke("no-new-messages");return Ie({className:f,content:e})}function Ge(e){var t=ke("log-in-to-show-messages"),n=ke("dont-have-account"),r=Ie({className:p,content:t}),o=Ie({className:p,content:n}),a="/logowanie?origin_url=".concat(encodeURIComponent(e.location));return te(xe||(xe=J(['<div class="','">','<a href="','" class="','" rel="nofollow" data-role="login-button">',"</a>",'<a href="','" class="','" rel="nofollow" data-analytics-clickable data-role="register-button">',"</a></div>"])),v,ee(r),a,u,ke("login"),ee(o),"/rejestracja",y,ke("register"))}var Pe=".".concat(I),Ue=function(){function e(t,n,r,a){var s=this;o(this,e),i(this,"onOpen",(function(){s.root.removeEventListener("inViewport",s.onOpen),s.api.getMessages().then(s.onResponse).catch(s.onError)})),i(this,"onResponse",(function(e){var t,n=e.data,r=(t=n.messages).length>0?function(e){var t=function(e){var t=e.reduce((function(e,t){var n=e,r=t.groupId||t.tinkerbellId;return(n[Te(r)]||(n[Te(r)]=[])).push(t),n}),{});return Object.values(t)}(e).map(Oe).join("");return te(be||(be=J(['<ul class="','" data-role="message-list">',"</ul>"])),l,ee(t))}(t):Ne();s.setContent(r),s.setupListeners(),s.handleDisplayed(n)})),i(this,"onError",(function(e){var t=401===e.status?Ge(s.window):function(){var e=ke("loading-messages-failed");return Ie({className:h,content:e})}();s.setContent(t)})),i(this,"setContent",(function(e){s.content.innerHTML=e})),i(this,"handleDisplayed",(function(e){var t=e.messages;s.services&&s.services.get("opbox-notification-service").then((function(e){e.reset("inboxes")}));var n=t.filter((function(e){return"CLICKED"!==e.status}));n.length>0&&s.api.updateStatusToDisplayed(n.map((function(e){return e.tinkerbellId})))})),i(this,"setupListeners",(function(){s.root.querySelectorAll('[data-role="message-group-toggle"]').forEach((function(e){return e.addEventListener("click",s.toggleGroupVisibility)})),s.root.querySelectorAll('button[data-role="message-dropdown"]').forEach((function(e){return e.addEventListener("click",s.toggleDeleteMessageDropdown)})),s.root.querySelectorAll('[data-role="action-delete"]').forEach((function(e){return e.addEventListener("click",s.singleMessageDeleteListener(e.dataset.idToDelete))})),s.root.querySelectorAll('[data-role="action-delete-group"]').forEach((function(e){return e.addEventListener("click",s.groupMessageDeleteListener(e.dataset.idToDelete))}))})),i(this,"toggleDeleteMessageDropdown",(function(e){e.preventDefault();var t=e.currentTarget.parentElement.parentElement.querySelector('[data-role="message-actions-dropdown"]'),n=t.classList.contains(D);s.root.querySelectorAll('[data-role="message-actions-dropdown"]').forEach(s.hideActionsDropdown),n||(t.classList.add(D),t.querySelector('button[data-role="message-dropdown"]').classList.add(L))})),i(this,"toggleGroupVisibility",(function(e){e.preventDefault();var t=e.currentTarget,n=t.parentElement;if(n){t.classList.toggle(U);var r=n.parentElement.querySelector('[data-role="message-group-content"]');r.classList.toggle(K),r.classList.toggle($)}})),this.window=t,this.api=n,this.root=r,this.content=r.querySelector('[data-role="inbox"]'),this.services=a}return s(e,[{key:"initialize",value:function(){null!==function(e){for(var t=document.cookie.split(/;\s*/),n=t.length-1;n>=0;n-=1){var r=B(t[n].split("=").map((function(e){return decodeURIComponent(e)})),2),o=r[0],a=r[1];if("qeppo_login2"===o)return a}return null}()?this.root.addEventListener("inViewport",this.onOpen):this.setContent(Ge(this.window))}},{key:"groupMessageDeleteListener",value:function(e){var t=this;return function(n){n.stopPropagation(),t.api.deleteGroup(e),t.deleteMessageListItem(n.target.closest(Pe)),t.window.opbox.analytics.sendClickEvent({contextNode:t.root,label:"deleteMessageGroup",value:e})}}},{key:"deleteMessageListItem",value:function(e){e.remove(),this.root.querySelectorAll('[data-role="message"]').length||(this.content.innerHTML=Ne())}},{key:"singleMessageDeleteListener",value:function(e){var t=this;return function(n){n.stopPropagation(),t.api.delete(e),t.deleteSingleMessage(n.target.closest('[data-role="message"]')),t.window.opbox.analytics.sendClickEvent({contextNode:t.root,label:"deleteSingleMessage",value:e})}}},{key:"deleteSingleMessage",value:function(e){var t=e.parentNode,n=t.matches('[data-role="message-group-content"]'),r=1===t.childElementCount;n&&r&&this.removeGroupToggleControls(t),this.deleteMessageListItem(e)}},{key:"removeGroupToggleControls",value:function(e){var t=e.parentNode.querySelector('[data-role="message-group-toggle"]');e.remove(),t.remove()}},{key:"hideActionsDropdown",value:function(e){e.classList.remove(D),e.querySelector('button[data-role="message-dropdown"]').classList.remove(L)}}]),e}(),$e={withCredentials:!0,headers:{Accept:"application/json","Content-type":"application/json"}},Re=Object.assign({},$e,{headers:Object.assign({},$e.headers,{"Content-type":"application/vnd.allegro.public.v2+json"})}),Ke=function(){function e(t){o(this,e);var n=t.opbox.edge;this.edge=n}return s(e,[{key:"getMessages",value:function(){return this.edge.get("/inbox/messages",$e)}},{key:"updateStatusToDisplayed",value:function(e){var t={tinkerbellIdEvents:e.map((function(e){return{tinkerbellId:e}}))};this.edge.post("/inbox/events/displayed",t,Re)}},{key:"delete",value:function(e){this.edge.delete("".concat("/inbox/messages","/").concat(e),$e)}},{key:"deleteGroup",value:function(e){this.edge.delete("".concat("/inbox/messages/group","/").concat(e),$e)}}]),e}(),Ve=function(){function e(t){var n=t.baseNode,r=t.services;o(this,e),this.baseNode=n,this.services=r}return s(e,[{key:"onMount",value:function(){var e=new Ke(window);new Ue(window,e,this.baseNode,this.services).initialize()}}]),e}();window.opbox.component.register({prototypeName:"allegro.user.inbox"},Ve)}}));
//# sourceMappingURL=index-pl-PL_bf590817.js.map